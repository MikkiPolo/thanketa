# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º AI-—Å—Ç–∏–ª–∏—Å—Ç–∞

## –û–±–∑–æ—Ä

AI-—Å—Ç–∏–ª–∏—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 5 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π. –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `handle_tool_call()` –≤ —Ñ–∞–π–ª–µ `backend/app.py`.

---

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 1: `about_user`

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∞–Ω–∫–µ—Ç—ã (—Ç–∞–±–ª–∏—Ü–∞ `user_profile` –≤ Supabase).

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ:
1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `get_supabase_client()` –∏–∑ `brand_service_v4`
2. **–ó–∞–ø—Ä–æ—Å –∫ –ë–î**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å `SELECT * FROM user_profile WHERE telegram_id = {telegram_id}`
3. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –ò–∑ –ø—Ä–æ—Ñ–∏–ª—è –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:
   - `figura` - —Ç–∏–ø —Ñ–∏–≥—É—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `cvetotip` - —Ü–≤–µ—Ç–æ—Ç–∏–ø
   - `stil_zhizni` - —Å—Ç–∏–ª—å –∂–∏–∑–Ω–∏
   - `celi` - —Ü–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `predpochtenia` - –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
   - `name` - –∏–º—è
   - `age` - –≤–æ–∑—Ä–∞—Å—Ç
4. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏–ª–∏ –æ—à–∏–±–∫–æ–π, –µ—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
```json
{
  "figura": "–ü–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã",
  "cvetotip": "–í–µ—Å–Ω–∞",
  "stil_zhizni": "–ê–∫—Ç–∏–≤–Ω—ã–π",
  "celi": "–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –≥–∞—Ä–¥–µ—Ä–æ–±",
  "predpochtenia": "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å—Ç–∏–ª—å",
  "name": "–ê–Ω–Ω–∞",
  "age": 25
}
```

### –û—à–∏–±–∫–∏:
- `{"error": "Supabase –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω"}` - –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
- `{"error": "–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"}` - –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º `telegram_id` –Ω–µ –Ω–∞–π–¥–µ–Ω

---

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 2: `wardrobe`

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–µ—â–µ–π –∏–∑ –≥–∞—Ä–¥–µ—Ä–æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∞–±–ª–∏—Ü–∞ `wardrobe` –≤ Supabase).

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ:
1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `get_supabase_client()`
2. **–ó–∞–ø—Ä–æ—Å –∫ –ë–î**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å:
   ```sql
   SELECT id, category, description, season 
   FROM wardrobe 
   WHERE telegram_id = {telegram_id}
   ```
3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞**: –ë–µ—Ä–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º **100 –≤–µ—â–µ–π** (–ø–µ—Ä–≤—ã–µ 100 –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
4. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞**: –î–ª—è –∫–∞–∂–¥–æ–π –≤–µ—â–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è:
   - `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
   - `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ø–ª–∞—Ç—å–µ", "–±—Ä—é–∫–∏", "–∫—É—Ä—Ç–∫–∞")
   - `description` - –æ–ø–∏—Å–∞–Ω–∏–µ –≤–µ—â–∏
   - `season` - —Å–µ–∑–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–û—Å–µ–Ω—å", "–ó–∏–º–∞", "–í—Å–µ—Å–µ–∑–æ–Ω–Ω–æ")

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
```json
{
  "items": [
    {
      "id": "123",
      "category": "–ø–ª–∞—Ç—å–µ",
      "description": "–ß–µ—Ä–Ω–æ–µ –ø–ª–∞—Ç—å–µ –º–∏–¥–∏",
      "season": "–í—Å–µ—Å–µ–∑–æ–Ω–Ω–æ"
    },
    {
      "id": "124",
      "category": "–±—Ä—é–∫–∏",
      "description": "–°–∏–Ω–∏–µ –¥–∂–∏–Ω—Å—ã",
      "season": "–û—Å–µ–Ω—å"
    }
  ],
  "count": 2
}
```

### –û—à–∏–±–∫–∏:
- `{"error": "Supabase –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω"}` - –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
- `{"items": [], "count": 0}` - –µ—Å–ª–∏ –≥–∞—Ä–¥–µ—Ä–æ–± –ø—É—Å—Ç

---

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 3: `get_weather`

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–æ–ª—É—á–∞–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞. **–í–ù–ò–ú–ê–ù–ò–ï**: –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É, —Ç–∞–∫ –∫–∞–∫ —Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –ø–æ–≥–æ–¥—ã –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `location` (–≥–æ—Ä–æ–¥) –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ï—Å–ª–∏ –≥–æ—Ä–æ–¥ –Ω–µ —É–∫–∞–∑–∞–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞
3. **–í–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç **–≤—Å–µ–≥–¥–∞** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ —Ç–æ–º, —á—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `location` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (–æ—à–∏–±–∫–∞):
```json
{
  "error": "–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –¥–ª—è –≥–æ—Ä–æ–¥–∞ '–ú–æ—Å–∫–≤–∞' –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."
}
```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É, —á—Ç–æ–±—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –í –±—É–¥—É—â–µ–º –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º API –ø–æ–≥–æ–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, OpenWeatherMap)
- –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∫–∞–∑–∞—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è

---

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 4: `recommend`

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –±—Ä–µ–Ω–¥–æ–≤ (—Ç–∞–±–ª–∏—Ü–∞ `brand_items` –≤ Supabase).

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ:
1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `get_supabase_client()`
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**:
   - `season` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–µ–∑–æ–Ω –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "–í—Å–µ—Å–µ–∑–æ–Ω–Ω–æ")
   - `category` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ø–ª–∞—Ç—å–µ", "–±—Ä—é–∫–∏")
3. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞**:
   ```sql
   SELECT id, brand_id, category, season, description, image_id, shop_link, price, currency
   FROM brand_items
   WHERE is_approved = true 
     AND is_active = true
     AND season = {season} (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
     AND category = {category} (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
   LIMIT 20
   ```
4. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
   ```
   https://lipolo.store/storage/v1/object/public/brand-items-images/{brand_id}/{image_id}.jpg
   ```
5. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º **20 —Ç–æ–≤–∞—Ä–æ–≤**

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `season` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–µ–∑–æ–Ω: "–û—Å–µ–Ω—å", "–ó–∏–º–∞", "–í–µ—Å–Ω–∞", "–õ–µ—Ç–æ", "–í—Å–µ—Å–µ–∑–æ–Ω–Ω–æ"
- `category` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
```json
{
  "items": [
    {
      "id": "456",
      "category": "–ø–ª–∞—Ç—å–µ",
      "description": "–≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ –ø–ª–∞—Ç—å–µ –º–∏–¥–∏",
      "season": "–û—Å–µ–Ω—å",
      "image_url": "https://lipolo.store/storage/v1/object/public/brand-items-images/1/abc123.jpg",
      "shop_link": "https://shop.example.com/item/456",
      "price": "5000",
      "currency": "RUB"
    }
  ],
  "count": 1
}
```

### –û—à–∏–±–∫–∏:
- `{"error": "Supabase –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω"}` - –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
- `{"items": [], "count": 0}` - –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

---

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç 5: `search_web`

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ. **–í–ù–ò–ú–ê–ù–ò–ï**: –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–æ–π –∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ:
1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `query` (–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å)
2. **–í–æ–∑–≤—Ä–∞—Ç –∑–∞–≥–ª—É—à–∫–∏**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ —Ç–æ–º, —á—Ç–æ –ø–æ–∏—Å–∫ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `query` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
```json
{
  "query": "–º–æ–¥–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã 2024",
  "results": [],
  "note": "–ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç recommend –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤."
}
```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
- –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç—É —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `recommend` –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

---

## üîÑ –û–±—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

1. **–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**: –ö–æ–≥–¥–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç –æ–¥–∏–Ω –∏–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ OpenAI Assistants API
2. **–°–æ–±—ã—Ç–∏–µ `thread.run.requires_action`**: Backend –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ, —á—Ç–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
3. **–ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–∑–æ–≤–∞**: –ò–∑ —Å–æ–±—ã—Ç–∏—è –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è:
   - `tool_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
   - `tool_args` - –∞—Ä–≥—É–º–µ–Ω—Ç—ã (JSON —Å—Ç—Ä–æ–∫–∞, –ø–∞—Ä—Å–∏—Ç—Å—è –≤ —Å–ª–æ–≤–∞—Ä—å)
   - `tool_call_id` - ID –≤—ã–∑–æ–≤–∞ (–Ω—É–∂–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
4. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞**: –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `handle_tool_call()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
5. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**: –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ JSON —Å—Ç—Ä–æ–∫–∏
6. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**: –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ OpenAI —á–µ—Ä–µ–∑ `submit_tool_outputs_stream()`
7. **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞**: –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
- `üî® –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: {tool_name}, –∞—Ä–≥—É–º–µ–Ω—Ç—ã: {tool_args}` - –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- `‚ö†Ô∏è –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ {tool_name}: {error}` - –ø—Ä–∏ –æ—à–∏–±–∫–µ
- `üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è run {run_id}...` - –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–†–∞—Å—Å–∫–∞–∂–∏ –æ –º–æ–µ–º —Å—Ç–∏–ª–µ"
‚Üí –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç: about_user()
‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
‚Üí –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: "–°—É–¥—è –ø–æ –≤–∞—à–µ–π –∞–Ω–∫–µ—Ç–µ, —É –≤–∞—Å —Ç–∏–ø —Ñ–∏–≥—É—Ä—ã '–ü–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã'..."
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–∞—Ä–¥–µ—Ä–æ–±–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ß—Ç–æ –º–Ω–µ –Ω–∞–¥–µ—Ç—å?"
‚Üí –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç: wardrobe()
‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–ø–∏—Å–æ–∫ –≤–µ—â–µ–π –∏–∑ –≥–∞—Ä–¥–µ—Ä–æ–±–∞
‚Üí –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: "–ò–∑ –≤–∞—à–µ–≥–æ –≥–∞—Ä–¥–µ—Ä–æ–±–∞ —è –≤–∏–∂—É... –†–µ–∫–æ–º–µ–Ω–¥—É—é..."
```

### –ü—Ä–∏–º–µ—Ä 3: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ–∫–∞–∂–∏ –º–Ω–µ –ø–ª–∞—Ç—å—è –Ω–∞ –æ—Å–µ–Ω—å"
‚Üí –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç: recommend(season="–û—Å–µ–Ω—å", category="–ø–ª–∞—Ç—å–µ")
‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–ø–∏—Å–æ–∫ –ø–ª–∞—Ç—å–µ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –±—Ä–µ–Ω–¥–æ–≤
‚Üí –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: "–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–ª–∞—Ç—å–µ–≤ –Ω–∞ –æ—Å–µ–Ω—å..."
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
   - `wardrobe` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 100 –≤–µ—â–µ–π
   - `recommend` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 20 —Ç–æ–≤–∞—Ä–æ–≤
   - `get_weather` –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É)
   - `search_web` –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–∑–∞–≥–ª—É—à–∫–∞)

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `telegram_id` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –¢–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (`is_approved=true`, `is_active=true`) –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∏–∑ `recommend`

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
   - –ó–∞–ø—Ä–æ—Å—ã –∫ Supabase –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
   - –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤–µ—â–µ–π –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∞

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
   - –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
   - –ü—Ä–∏ –æ—à–∏–±–∫–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –ø–æ–ª–µ–º `error`
   - –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É –∏ –º–æ–∂–µ—Ç —Å–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ –ø—Ä–æ–±–ª–µ–º–µ

