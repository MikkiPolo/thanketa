# –ü–û–õ–ù–´–ô –ü–†–û–¶–ï–°–° –ì–ï–ù–ï–†–ê–¶–ò–ò –ö–ê–ü–°–£–õ

## üì± **–§–†–û–ù–¢–ï–ù–î ‚Üí –ë–≠–ö–ï–ù–î ‚Üí –§–†–û–ù–¢–ï–ù–î**

---

## **–≠–¢–ê–ü 1: –ò–ù–ò–¶–ò–ê–¶–ò–Ø –ó–ê–ü–†–û–°–ê (Frontend)**

### 1.1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å –∫–∞–ø—Å—É–ª—ã"
**–§–∞–π–ª:** `src/CapsulePage.jsx`, —Ñ—É–Ω–∫—Ü–∏—è `generateCapsules()` (—Å—Ç—Ä–æ–∫–∞ 151)

**–î–µ–π—Å—Ç–≤–∏—è:**
```javascript
const generateCapsules = async () => {
  setLoading(true);
  setCapsules(null); // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∫–∞–ø—Å—É–ª—ã
  
  // 1. –ü–æ–ª—É—á–∞–µ–º –≥–∞—Ä–¥–µ—Ä–æ–± –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Supabase
  const wardrobe = await wardrobeService.getWardrobe(profile.telegram_id);
  
  // 2. –§–∏–ª—å—Ç—Ä—É–µ–º –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–µ—â–∏ (is_suitable !== false)
  const eligibleWardrobe = wardrobe.filter(it => it.is_suitable !== false);
  
  // 3. –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É —á–µ—Ä–µ–∑ OpenWeatherMap API
  const weather = await fetchWeather();
  
  // 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–∞–ø—Å—É–ª—ã
  const generatedCapsules = await generateCapsulesFromWardrobe(
    eligibleWardrobe, 
    profile, 
    weather, 
    { forceRefresh: true }
  );
}
```

---

### 1.2. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**A. –ì–∞—Ä–¥–µ—Ä–æ–± –∏–∑ Supabase:**
- –ó–∞–ø—Ä–æ—Å –∫ —Ç–∞–±–ª–∏—Ü–µ `wardrobe_items`
- –§–∏–ª—å—Ç—Ä: `telegram_id = {user_id}`
- –ü–æ–ª—è: `id, category, season, description, image_id, is_suitable`

**B. –ü–æ–≥–æ–¥–∞ —Å OpenWeatherMap:**
```javascript
GET https://api.openweathermap.org/data/2.5/weather
  ?lat={latitude}
  &lon={longitude}
  &appid=d69e489c7ddeb793bff2350cc232dab7
  &units=metric
  &lang=ru
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "main": {
    "temp": 14.05,  // –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ ¬∞C
    "feels_like": 12.3,
    "humidity": 85
  },
  "weather": [...]
}
```

---

### 1.3. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ –±—ç–∫–µ–Ω–¥—É

**–§–∞–π–ª:** `src/CapsulePage.jsx`, —Ñ—É–Ω–∫—Ü–∏—è `generateCapsulesFromWardrobe()` (—Å—Ç—Ä–æ–∫–∞ 261)

**Endpoint:** `POST /generate-capsules`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "wardrobe": [
    {
      "id": "uuid-1",
      "category": "–¢–æ–ø",
      "season": "–í—Å–µ—Å–µ–∑–æ–Ω–Ω—ã–π",
      "description": "–ë–µ–ª–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞",
      "is_suitable": true
    },
    // ... –≤—Å–µ –≤–µ—â–∏ –≥–∞—Ä–¥–µ—Ä–æ–±–∞ (132 –≤–µ—â–∏)
  ],
  "profile": {
    "telegram_id": "123456",
    "figura": "–ø–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã",
    "cvetotip": "—Ö–æ–ª–æ–¥–Ω–∞—è –∑–∏–º–∞",
    "location_latitude": 55.7558,
    "location_longitude": 37.6173
  },
  "weather": {
    "main": { "temp": 14.05 }
  },
  "no_cache": true,           // –û–±—Ö–æ–¥–∏–º –∫—ç—à
  "engine": "rule",            // –ò—Å–ø–æ–ª—å–∑—É–µ–º rule-based –¥–≤–∏–∂–æ–∫
  "rule_engine": true,
  "exclude_combinations": []   // –£–∂–µ –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
}
```

---

## **–≠–¢–ê–ü 2: –û–ë–†–ê–ë–û–¢–ö–ê –ù–ê –ë–≠–ö–ï–ù–î–ï**

### 2.1. –ü—Ä–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞

**–§–∞–π–ª:** `backend/app.py`, endpoint `/generate-capsules` (—Å—Ç—Ä–æ–∫–∞ 617)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü–æ–ª—É—á–µ–Ω–∏–µ JSON –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `wardrobe`, `profile`, `weather`
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
@app.route('/generate-capsules', methods=['POST'])
def generate_capsules():
    data = request.get_json()
    wardrobe = data.get('wardrobe', [])      # 132 –≤–µ—â–∏
    profile = data.get('profile', {})
    weather = data.get('weather', {})
```

---

### 2.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞ Redis

**–§–∞–π–ª:** `backend/app.py` (—Å—Ç—Ä–æ–∫–∏ 637-667)

**–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –∫—ç—à–∞:**
```python
cache_key_src = {
    'wardrobe': wardrobe,
    'profile': profile,
    'weather': weather,
    'engine': 'rule'
}
# SHA256 —Ö—ç—à –æ—Ç JSON
cache_key = f"capsules:{hash}"
```

**–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞:**
- –ï—Å–ª–∏ `no_cache=true` ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∫—ç—à
- –ï—Å–ª–∏ –∫—ç—à –Ω–∞–π–¥–µ–Ω ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

---

### 2.3. –í—ã–±–æ—Ä –¥–≤–∏–∂–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `backend/app.py` (—Å—Ç—Ä–æ–∫–∏ 669-675)

**–õ–æ–≥–∏–∫–∞:**
```python
engine = data.get('engine', '').lower()
use_rule = engine != 'gpt'

if use_rule:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º RULE-BASED –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
else:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º GPT-4o-mini
```

**–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **rule-based** –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä

---

### 2.4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

**–§–∞–π–ª:** `backend/app.py` (—Å—Ç—Ä–æ–∫–∏ 676-684)

```python
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–µ–∑–æ–Ω
current_season = get_season_from_date()  # "–û—Å–µ–Ω—å"

# –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É
temp_c = weather.get('main', {}).get('temp', 20.0)  # 14.05¬∞C

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
max_total = 30  # –ú–∞–∫—Å–∏–º—É–º –∫–∞–ø—Å—É–ª
exclude_combos = []  # –ò—Å–∫–ª—é—á–∞–µ–º —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–µ
```

---

## **–≠–¢–ê–ü 3: RULE-BASED –ì–ï–ù–ï–†–ê–¢–û–† –ö–ê–ü–°–£–õ**

### 3.1. –í—ã–∑–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

**–§–∞–π–ª:** `backend/app.py` (—Å—Ç—Ä–æ–∫–∏ 685-695)

```python
capsules_core = rule_generate_capsules(
    wardrobe_items=wardrobe,      # 132 –≤–µ—â–∏
    season_hint="–û—Å–µ–Ω—å",
    temp_c=14.05,
    predpochtenia="–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π",
    figura="–ø–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã",
    cvetotip="—Ö–æ–ª–æ–¥–Ω–∞—è –∑–∏–º–∞",
    banned_ids=[],
    allowed_ids=None,
    max_total=30
)
```

**–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä:** `backend/capsule_engine_v2.py`, —Ñ—É–Ω–∫—Ü–∏—è `generate_capsules()` (—Å—Ç—Ä–æ–∫–∞ 390)

---

### 3.2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–µ—â–µ–π

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 430-446)

**–®–∞–≥–∏:**

1. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π** (—Ñ—É–Ω–∫—Ü–∏—è `translate_category`):
   - –í—Ö–æ–¥–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: "–¢–æ–ø", "–ë—Ä—é–∫–∏", "–ü–ª–∞—Ç—å–µ", "–ö—É—Ä—Ç–∫–∞" –∏ —Ç.–¥.
   - –í—ã—Ö–æ–¥–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: `tops`, `bottoms`, `dresses`, `outerwear`, `shoes`, `accessories`, `other`

2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º** (—Ñ—É–Ω–∫—Ü–∏—è `allowed_item`):
   - ‚úÖ –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å (–ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –¥–ª—è –æ—Å–µ–Ω–∏?)
   - ‚úÖ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –¥–ª—è 14¬∞C?)
   - ‚úÖ –¶–≤–µ—Ç–æ—Ç–∏–ø (–ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –¥–ª—è "—Ö–æ–ª–æ–¥–Ω–æ–π –∑–∏–º—ã"?)
   - ‚úÖ –§–∏–≥—É—Ä–∞ (–ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –¥–ª—è "–ø–µ—Å–æ—á–Ω—ã—Ö —á–∞—Å–æ–≤"?)
   - ‚úÖ –°—Ç–∏–ª—å (–ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π)

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
```python
pool = [item for item in wardrobe if allowed_item(item, ...)]
# –ò–∑ 132 –≤–µ—â–µ–π –æ—Å—Ç–∞–µ—Ç—Å—è ~80-100 –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö
```

---

### 3.3. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 448-459)

```python
by_group = defaultdict(list)
for item in pool:
    category = translate_category(item['category'])
    by_group[category].append(item)

tops = by_group["tops"]           # 23 –≤–µ—â–∏
bottoms = by_group["bottoms"]     # 14 –≤–µ—â–µ–π
dresses = by_group["dresses"]     # 2 –ø–ª–∞—Ç—å—è
outer = by_group["outerwear"]     # 19 –∫—É—Ä—Ç–æ–∫/–ø–∞–ª—å—Ç–æ
shoes = by_group["shoes"]         # 11 –ø–∞—Ä –æ–±—É–≤–∏
accs = by_group["accessories"]    # 29 –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤
```

**–õ–æ–≥:**
```
üîç –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º: tops=23, bottoms=14, dresses=2, outer=19, shoes=11, accs=29
```

---

### 3.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ –æ–±—É–≤–∏

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 462-473)

**–õ–æ–≥–∏–∫–∞:**
```python
# –î–ª—è 30 –∫–∞–ø—Å—É–ª —Å max_per_item=3 –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º:
min_shoes_needed = (30 + 3 - 1) // 3 = 11 –ø–∞—Ä

if len(shoes) >= min_shoes_needed:
    print("‚úÖ –û–±—É–≤—å –Ω–∞–π–¥–µ–Ω–∞: 11 –ø–∞—Ä (–Ω—É–∂–Ω–æ 11)")
else:
    print("‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±—É–≤–∏, —Ä–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ")
```

---

### 3.5. –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 475-492)

```python
# –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π –ø—É–ª –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏
random.shuffle(shoes)
random.shuffle(tops)
random.shuffle(bottoms)
random.shuffle(dresses)
random.shuffle(outer)

# –°–æ–∑–¥–∞–µ–º –æ—á–µ—Ä–µ–¥–∏ (deque) –¥–ª—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–±–æ—Ä–∞
shoes_q = deque(shoes)       # 11 –ø–∞—Ä
tops_q = deque(tops)         # 23 —Ç–æ–ø–∞
bottoms_q = deque(bottoms)   # 14 –Ω–∏–∑–æ–≤
dresses_q = deque(dresses)   # 2 –ø–ª–∞—Ç—å—è
outer_q = deque(outer)       # 19 –∫—É—Ä—Ç–æ–∫

# –†–∞–∑–±–∏–≤–∞–µ–º –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã –ø–æ –ø–æ–¥—Ç–∏–ø–∞–º
acc_by_type = {
    'belt': [—Ä–µ–º–Ω–∏],
    'earrings': [—Å–µ—Ä—å–≥–∏],
    'scarf': [—à–∞—Ä—Ñ—ã],
    'headwear': [—à–∞–ø–∫–∏],
    'necklace': [–±—É—Å—ã],
    'bracelet': [–±—Ä–∞—Å–ª–µ—Ç—ã],
    // ... –∏ —Ç.–¥.
}
```

---

### 3.6. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 494-509)

```python
used_count = {}       # –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–∞–∂–¥–∞—è –≤–µ—â—å
produced = set()      # –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (—á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è)
out = []              # –ì–æ—Ç–æ–≤—ã–µ –∫–∞–ø—Å—É–ª—ã

max_per_item = 3      # –û–¥–Ω—É –≤–µ—â—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å max 3 —Ä–∞–∑–∞
acc_per_outfit = (1, 3)  # –û—Ç 1 –¥–æ 3 –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤ –Ω–∞ –∫–∞–ø—Å—É–ª—É
```

---

## **–≠–¢–ê–ü 4: –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–ê–ü–°–£–õ**

### 4.1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 515-520)

```python
include_outerwear_below = 18.0  # –ü—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ < 18¬∞C –¥–æ–±–∞–≤–ª—è–µ–º –≤–µ—Ä—Ö–Ω—é—é –æ–¥–µ–∂–¥—É

def need_outerwear():
    return temp_c < 18.0 and bool(outer_q)

# –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ: 14.05¬∞C < 18¬∞C ‚Üí –Ω—É–∂–Ω–∞ –≤–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞
```

---

### 4.2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ø—Å—É–ª —Å –ü–õ–ê–¢–¨–Ø–ú–ò

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 588-630)

**–¶–∏–∫–ª 1: –ü–ª–∞—Ç—å—è + –û–±—É–≤—å + –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ + –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã**

```python
if dresses_q:  # –ï—Å—Ç—å 2 –ø–ª–∞—Ç—å—è
    for –ø–ª–∞—Ç—å–µ in dresses_q:
        for –æ–±—É–≤—å in shoes_q:
            items = [–ø–ª–∞—Ç—å–µ, –æ–±—É–≤—å]
            
            # –î–æ–±–∞–≤–ª—è–µ–º –≤–µ—Ä—Ö–Ω—é—é –æ–¥–µ–∂–¥—É –µ—Å–ª–∏ —Ö–æ–ª–æ–¥–Ω–æ (<18¬∞C)
            if need_outerwear():  # True –ø—Ä–∏ 14¬∞C
                –≤–µ—Ä—Ö–Ω—è—è_–æ–¥–µ–∂–¥–∞ = pick_from_queue(outer_q)
                items.append(–≤–µ—Ä—Ö–Ω—è—è_–æ–¥–µ–∂–¥–∞)
            
            # –î–æ–±–∞–≤–ª—è–µ–º 1-3 –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞
            –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã = pick_accessories(1, 3)
            items.extend(–∞–∫—Å–µ—Å—Å—É–∞—Ä—ã)
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–ø—Å—É–ª—É
            if commit(items):
                out.append(Capsule(id, name, items, description))
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ~2-6 –∫–∞–ø—Å—É–ª —Å –ø–ª–∞—Ç—å—è–º–∏

---

### 4.3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ø—Å—É–ª —Å –¢–û–ü–ê–ú–ò –∏ –ù–ò–ó–û–ú

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 632-664)

**–¶–∏–∫–ª 2: –í–µ—Ä—Ö + –ù–∏–∑ + –û–±—É–≤—å + –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ + –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã**

```python
if tops_q and bottoms_q:  # –ï—Å—Ç—å 23 —Ç–æ–ø–∞ –∏ 14 –Ω–∏–∑–æ–≤
    for –Ω–∏–∑ in bottoms_q:
        for –≤–µ—Ä—Ö in tops_q:
            # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—É–≤—å –µ—Å–ª–∏ –µ—Å—Ç—å
            if shoes_q:
                –æ–±—É–≤—å = pick_from_queue(shoes_q)
                items = [–≤–µ—Ä—Ö, –Ω–∏–∑, –æ–±—É–≤—å]
            else:
                items = [–≤–µ—Ä—Ö, –Ω–∏–∑]
            
            # –î–æ–±–∞–≤–ª—è–µ–º –≤–µ—Ä—Ö–Ω—é—é –æ–¥–µ–∂–¥—É –µ—Å–ª–∏ —Ö–æ–ª–æ–¥–Ω–æ
            if need_outerwear():
                –≤–µ—Ä—Ö–Ω—è—è_–æ–¥–µ–∂–¥–∞ = pick_from_queue(outer_q)
                items.append(–≤–µ—Ä—Ö–Ω—è—è_–æ–¥–µ–∂–¥–∞)
            
            # –î–æ–±–∞–≤–ª—è–µ–º 1-3 –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞
            –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã = pick_accessories(1, 3)
            items.extend(–∞–∫—Å–µ—Å—Å—É–∞—Ä—ã)
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
            if commit(items):
                out.append(Capsule(id, name, items, description))
            
            # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
            if len(out) >= max_total:
                break
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ~14-24 –∫–∞–ø—Å—É–ª—ã —Å —Ç–æ–ø–∞–º–∏ –∏ –Ω–∏–∑–æ–º

---

### 4.4. –§—É–Ω–∫—Ü–∏—è `pick_accessories()` - –≤—ã–±–æ—Ä –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∞ 543)

**–õ–æ–≥–∏–∫–∞:**
```python
def pick_accessories(k_min, k_max):
    # –°–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: –æ—Ç 1 –¥–æ 3
    target = random.randint(1, 3)
    
    got = []
    
    # –¶–∏–∫–ª–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º —Ç–∏–ø—ã –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤
    for —Ç–∏–ø in acc_type_ring:  # ['belt', 'earrings', 'scarf', 'necklace', ...]
        if len(got) >= target:
            break
        
        # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –∞–∫—Å–µ—Å—Å—É–∞—Ä —ç—Ç–æ–≥–æ —Ç–∏–ø–∞
        queue = acc_by_type[—Ç–∏–ø]
        for –∞–∫—Å–µ—Å—Å—É–∞—Ä in queue:
            if can_take(–∞–∫—Å–µ—Å—Å—É–∞—Ä.id):  # –ï—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω 3 —Ä–∞–∑–∞
                got.append(–∞–∫—Å–µ—Å—Å—É–∞—Ä)
                queue.rotate(-1)  # –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏
                break
    
    return got  # [—Ä–µ–º–µ–Ω—å, —à–∞—Ä—Ñ] –∏–ª–∏ [—Å–µ—Ä—å–≥–∏] –∏ —Ç.–¥.
```

---

### 4.5. –§—É–Ω–∫—Ü–∏—è `commit()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–ø—Å—É–ª—ã

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∞ 571)

**–ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º:**

```python
def commit(items):
    # 1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –æ–±—É–≤—å (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–µ)
    if shoes_q and not has_shoes(items):
        return False  # –û—Ç–∫–ª–æ–Ω—è–µ–º –∫–∞–ø—Å—É–ª—É
    
    # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
    key = unique_key(items)  # –ù–∞–ø—Ä–∏–º–µ—Ä: "–ø–ª–∞—Ç—å–µ_123+–æ–±—É–≤—å_456+–∫—É—Ä—Ç–∫–∞_789"
    if key in produced:
        return False  # –¢–∞–∫–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —É–∂–µ –±—ã–ª–∞
    
    # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–π –≤–µ—â–∏
    for –≤–µ—â—å in items:
        if used_count[–≤–µ—â—å.id] >= max_per_item:  # >= 3
            return False
    
    # 4. –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã - —Å–æ—Ö—Ä–∞–Ω—è–µ–º
    for –≤–µ—â—å in items:
        used_count[–≤–µ—â—å.id] += 1
    
    capsule_id = f"c{len(out)+1}"  # c1, c2, c3...
    out.append(Capsule(
        id=capsule_id,
        name=name_for(items),         # "–û–±—Ä–∞–∑ —Å –ø–ª–∞—Ç—å–µ–º"
        items=[–≤–µ—â—å.id for –≤–µ—â—å in items],  # ["uuid-1", "uuid-2", ...]
        description=descr_for(items)  # "–ü–ª–∞—Ç—å–µ + –æ–±—É–≤—å + –∫—É—Ä—Ç–∫–∞ + —à–∞—Ä—Ñ + —Ä–µ–º–µ–Ω—å"
    ))
    produced.add(key)
    return True
```

---

### 4.6. –§—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏–π

**`name_for(items)` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–ø—Å—É–ª—ã:**
```python
if has_dress:
    return "–û–±—Ä–∞–∑ —Å –ø–ª–∞—Ç—å–µ–º"
elif has_outerwear:
    return "–¢–µ–ø–ª—ã–π –æ–±—Ä–∞–∑"
else:
    return "–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π –æ–±—Ä–∞–∑"
```

**`descr_for(items)` - –æ–ø–∏—Å–∞–Ω–∏–µ:**
```python
# –ü–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–µ—â–µ–π
# –ù–∞–ø—Ä–∏–º–µ—Ä: "–ü–ª–∞—Ç—å–µ + –û–±—É–≤—å + –ö—É—Ä—Ç–∫–∞ + –®–∞—Ä—Ñ + –†–µ–º–µ–Ω—å"
```

---

### 4.7. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `backend/capsule_engine_v2.py` (—Å—Ç—Ä–æ–∫–∏ 666-676)

```python
# –§–æ—Ä–º–∏—Ä—É–µ–º JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç
capsules_json = [
    {
        "id": c.id,              # "c1"
        "name": c.name,          # "–û–±—Ä–∞–∑ —Å –ø–ª–∞—Ç—å–µ–º"
        "items": c.items,        # ["uuid-1", "uuid-2", ...]
        "description": c.description
    }
    for c in out
]

print(f'‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–ø—Å—É–ª: {len(out)}')

return {
    "categories": [
        {
            "id": "casual",
            "name": "–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π",
            "capsules": capsules_json,
            "fullCapsules": capsules_json
        }
    ]
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 20 –∫–∞–ø—Å—É–ª

---

## **–≠–¢–ê–ü 5: –ö–≠–®–ò–†–û–í–ê–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–ê**

**–§–∞–π–ª:** `backend/app.py` (—Å—Ç—Ä–æ–∫–∏ 720-727)

```python
# –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Redis –Ω–∞ 6 —á–∞—Å–æ–≤
ttl = 6 * 60 * 60  # 21600 —Å–µ–∫—É–Ω–¥

response_obj = {
    'capsules': capsules_obj,
    'meta': { 'source': 'rule', 'total_capsules': 20 },
    'message': 'Capsules generated successfully'
}

redis.setex(cache_key, ttl, json.dumps(response_obj))
print(f"üü° CACHE SET: {cache_key} ttl=21600")
```

---

## **–≠–¢–ê–ü 6: –í–û–ó–í–†–ê–¢ –ù–ê –§–†–û–ù–¢–ï–ù–î**

### 6.1. –û—Ç–≤–µ—Ç –æ—Ç –±—ç–∫–µ–Ω–¥–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "capsules": {
    "categories": [
      {
        "id": "casual",
        "name": "–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π",
        "fullCapsules": [
          {
            "id": "c1",
            "name": "–û–±—Ä–∞–∑ —Å –ø–ª–∞—Ç—å–µ–º",
            "items": ["uuid-1", "uuid-2", "uuid-3", "uuid-4"],
            "description": "–ü–ª–∞—Ç—å–µ + –û–±—É–≤—å + –ö—É—Ä—Ç–∫–∞ + –®–∞—Ä—Ñ"
          },
          // ... –µ—â–µ 19 –∫–∞–ø—Å—É–ª
        ]
      }
    ]
  },
  "meta": {
    "source": "rule",
    "total_capsules": 20
  },
  "message": "Capsules generated successfully"
}
```

---

### 6.2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–§–∞–π–ª:** `src/CapsulePage.jsx` (—Å—Ç—Ä–æ–∫–∏ 324-343)

**–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**

```javascript
// 1. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –∫–∞–ø—Å—É–ª—ã –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
const flat = [];

result.capsules.categories.forEach(category => {
  category.fullCapsules.forEach(capsule => {
    
    // 2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º ID –≤–µ—â–µ–π –≤ –ø–æ–ª–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
    const itemsResolved = capsule.items.map(itemId => {
      // –ò—â–µ–º –≤–µ—â—å –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–µ –ø–æ ID
      const item = wardrobe.find(w => w.id === itemId);
      
      if (!item) return null;
      
      // –§–æ—Ä–º–∏—Ä—É–µ–º URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      const imageUrl = wardrobeService.getImageUrl(
        profile.telegram_id, 
        item.image_id
      );
      // URL: https://lipolo.store/storage/v1/object/public/
      //      wardrobe-items/{telegram_id}/{image_id}.jpg
      
      return {
        ...item,
        imageUrl: imageUrl
      };
    }).filter(Boolean);  // –£–±–∏—Ä–∞–µ–º null
    
    // 3. –°–æ—Ä—Ç–∏—Ä—É–µ–º –≤–µ—â–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const sorted = sortItemsByCategory(itemsResolved);
    // –ü–æ—Ä—è–¥–æ–∫: –ü–ª–∞—Ç—å–µ ‚Üí –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ ‚Üí –û–±—É–≤—å ‚Üí –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã
    
    // 4. –î–æ–±–∞–≤–ª—è–µ–º –≤ –ø–ª–æ—Å–∫–∏–π –º–∞—Å—Å–∏–≤
    flat.push({
      id: capsule.id,
      name: capsule.name,
      description: capsule.description,
      items: sorted,
      category: category.id
    });
  });
});

return flat.slice(0, 20);  // –ú–∞–∫—Å–∏–º—É–º 20 –∫–∞–ø—Å—É–ª
```

---

### 6.3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage

**–§–∞–π–ª:** `src/CapsulePage.jsx` (—Å—Ç—Ä–æ–∫–∏ 174-176)

```javascript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–ø—Å—É–ª—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ
localStorage.setItem(
  `cached_capsules_${profile.telegram_id}`, 
  JSON.stringify(capsules)
);

// –°–æ—Ö—Ä–∞–Ω—è–µ–º timestamp
localStorage.setItem(
  `cached_capsules_time_${profile.telegram_id}`, 
  Date.now().toString()
);
```

---

### 6.4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–ø—Å—É–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–§–∞–π–ª:** `src/CapsulePage.jsx` (—Å—Ç—Ä–æ–∫–∏ 425-550)

**–†–µ–Ω–¥–µ—Ä–∏–Ω–≥:**

```jsx
{capsules.map(capsule => (
  <div key={capsule.id} className="capsule-card">
    {/* –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–ø—Å—É–ª—ã */}
    <h3>{capsule.name}</h3>
    
    {/* –°–µ—Ç–∫–∞ –≤–µ—â–µ–π 3x3 */}
    <div className="items-grid">
      {capsule.items.map(item => (
        <div key={item.id} className="item-card">
          {/* –§–æ—Ç–æ –≤–µ—â–∏ */}
          <img src={item.imageUrl} alt={item.description} />
          
          {/* –ö–∞—Ç–µ–≥–æ—Ä–∏—è */}
          <span>{item.category}</span>
        </div>
      ))}
    </div>
    
    {/* –û–ø–∏—Å–∞–Ω–∏–µ */}
    <p>{capsule.description}</p>
  </div>
))}
```

---

## **–°–í–û–î–ö–ê –í–°–ï–ì–û –ü–†–û–¶–ï–°–°–ê**

### üîÑ **–®–ê–ì –ó–ê –®–ê–ì–û–ú:**

1. **Frontend**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û–±–Ω–æ–≤–∏—Ç—å –∫–∞–ø—Å—É–ª—ã"
2. **Frontend**: –ó–∞–ø—Ä–æ—Å –≥–∞—Ä–¥–µ—Ä–æ–±–∞ –∏–∑ Supabase (132 –≤–µ—â–∏)
3. **Frontend**: –ó–∞–ø—Ä–æ—Å –ø–æ–≥–æ–¥—ã —Å OpenWeatherMap (14.05¬∞C)
4. **Frontend ‚Üí Backend**: POST `/generate-capsules` —Å –¥–∞–Ω–Ω—ã–º–∏
5. **Backend**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞ Redis (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ no_cache=true)
6. **Backend**: –í—ã–±–æ—Ä –¥–≤–∏–∂–∫–∞ (rule-based)
7. **Backend**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–µ—â–µ–π –ø–æ —Å–µ–∑–æ–Ω—É/—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ/—Ü–≤–µ—Ç–æ—Ç–∏–ø—É (~80-100 –≤–µ—â–µ–π)
8. **Backend**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (tops, bottoms, dresses, outer, shoes, accs)
9. **Backend**: –°–æ–∑–¥–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π –∏ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ
10. **Backend**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ø—Å—É–ª —Å –ø–ª–∞—Ç—å—è–º–∏ (~2-6 –∫–∞–ø—Å—É–ª)
11. **Backend**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ø—Å—É–ª —Å —Ç–æ–ø–∞–º–∏ –∏ –Ω–∏–∑–æ–º (~14-24 –∫–∞–ø—Å—É–ª—ã)
12. **Backend**: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ JSON –æ—Ç–≤–µ—Ç–∞
13. **Backend**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Redis –∫—ç—à (6 —á–∞—Å–æ–≤)
14. **Backend ‚Üí Frontend**: –í–æ–∑–≤—Ä–∞—Ç JSON —Å 20 –∫–∞–ø—Å—É–ª–∞–º–∏
15. **Frontend**: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ ID –≤ –ø–æ–ª–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å —Ñ–æ—Ç–æ
16. **Frontend**: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤–µ—â–µ–π –ø–æ –ø–æ—Ä—è–¥–∫—É
17. **Frontend**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
18. **Frontend**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

### ‚è±Ô∏è **–í–†–ï–ú–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø:**

- –ó–∞–ø—Ä–æ—Å –≥–∞—Ä–¥–µ—Ä–æ–±–∞: ~200-500ms
- –ó–∞–ø—Ä–æ—Å –ø–æ–≥–æ–¥—ã: ~300-800ms
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ø—Å—É–ª (backend): ~500-2000ms
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ frontend: ~100-300ms
- **–ò–¢–û–ì–û:** ~1-4 —Å–µ–∫—É–Ω–¥—ã

---

### üìä **–°–¢–ê–¢–ò–°–¢–ò–ö–ê –¢–ï–ö–£–©–ï–ô –ì–ï–ù–ï–†–ê–¶–ò–ò:**

```
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
- –ì–∞—Ä–¥–µ—Ä–æ–±: 132 –≤–µ—â–∏
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 14.05¬∞C (—Ö–æ–ª–æ–¥–Ω–æ)
- –°–µ–∑–æ–Ω: –û—Å–µ–Ω—å

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:
- –ü–æ–¥—Ö–æ–¥—è—â–∏—Ö –≤–µ—â–µ–π: ~80-100

–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:
- –¢–æ–ø—ã: 23
- –ù–∏–∑—ã: 14
- –ü–ª–∞—Ç—å—è: 2
- –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞: 19
- –û–±—É–≤—å: 11
- –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã: 29

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è:
- –ö–∞–ø—Å—É–ª —Å –ø–ª–∞—Ç—å—è–º–∏: ~2-6
- –ö–∞–ø—Å—É–ª —Å —Ç–æ–ø–∞–º–∏ –∏ –Ω–∏–∑–æ–º: ~14-24
- –ò–¢–û–ì–û: 20 –∫–∞–ø—Å—É–ª

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–ø—Å—É–ª—ã (–ø—Ä–∏ 14¬∞C):
- –ü–ª–∞—Ç—å–µ (–∏–ª–∏ –í–µ—Ä—Ö + –ù–∏–∑)
- –û–±—É–≤—å
- –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ (—Ç.–∫. —Ö–æ–ª–æ–¥–Ω–æ)
- 1-3 –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞ (—à–∞—Ä—Ñ, —Ä–µ–º–µ–Ω—å –∏ —Ç.–¥.)
```

---

## üéØ **–ì–û–¢–û–í–û!**

–≠—Ç–æ –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞–ø—Å—É–ª –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

