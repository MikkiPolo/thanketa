# üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ì–ò–ë–†–ò–î–ù–û–ô –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1: –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å
**–ü—Ä–∏—á–∏–Ω–∞:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—ã—Ç–∞–ª—Å—è –Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä—ã –±—Ä–µ–Ω–¥–æ–≤ –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞: –µ—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ–±—ä–µ–∫—Ç - —ç—Ç–æ —Ç–æ–≤–∞—Ä –±—Ä–µ–Ω–¥–∞, –µ—Å–ª–∏ ID - –≤–µ—â—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (src/CapsulePage.jsx:330-349):**
```javascript
const itemsResolved = (capsule.items || []).map(itemIdOrObject => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º: —ç—Ç–æ ID –≤–µ—â–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–æ–ª–Ω—ã–π –æ–±—ä–µ–∫—Ç —Ç–æ–≤–∞—Ä–∞ –±—Ä–µ–Ω–¥–∞?
  if (typeof itemIdOrObject === 'object' && itemIdOrObject !== null) {
    // –≠—Ç–æ —Ç–æ–≤–∞—Ä –±—Ä–µ–Ω–¥–∞ (–ø–æ–ª–Ω—ã–π –æ–±—ä–µ–∫—Ç)
    return {
      ...itemIdOrObject,
      imageUrl: itemIdOrObject.imageUrl || itemIdOrObject.image_url,
      is_brand_item: true
    };
  } else {
    // –≠—Ç–æ ID –≤–µ—â–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const item = wardrobe.find(w => w.id === itemIdOrObject);
    return item ? { ...item, imageUrl: getImageUrl(item), is_brand_item: false } : null;
  }
});
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤
**–ü—Ä–∏—á–∏–Ω–∞:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–±–∞–≤–ª—è–ª —Ç–æ–≤–∞—Ä—ã –±—Ä–µ–Ω–¥–æ–≤ –ø–æ–≤–µ—Ä—Ö —Ç–µ—Ö, —á—Ç–æ —É–∂–µ –ø–æ–¥–º–µ—à–∞–ª –±—ç–∫–µ–Ω–¥  
**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `addBrandItemsToCapsules` —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**–£–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–¥:**
- `addBrandItemsToCapsules()` - ~80 —Å—Ç—Ä–æ–∫
- `getCurrentSeason()` - ~5 —Å—Ç—Ä–æ–∫

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ3: –ë–µ–π–¥–∂ üõçÔ∏è –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è –Ω–∞ –≤—Å–µ—Ö –≤–µ—â–∞—Ö
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ `is_brand_item` –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –±–µ–π–¥–∂–∞  
**–†–µ—à–µ–Ω–∏–µ:** –ë–µ–π–¥–∂ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è `item.is_brand_item === true`

**–ö–æ–¥ (src/CapsulePage.jsx:1060-1073):**
```javascript
{/* –ë–µ–π–¥–∂ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤ */}
{it.is_brand_item && (
  <div style={{
    position: 'absolute',
    top: '4px',
    right: '4px',
    background: '#000',
    color: '#fff',
    padding: '2px 6px',
    borderRadius: '4px',
    fontSize: '10px',
    fontWeight: 'bold'
  }}>
    üõçÔ∏è
  </div>
)}
```

---

### –î–æ–±–∞–≤–ª–µ–Ω–æ: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ impression
**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞–ø—Å—É–ª—É  
**–ß—Ç–æ:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –±—Ä–µ–Ω–¥–∞ –≤ –∫–∞–ø—Å—É–ª–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è impression

**–ö–æ–¥ (src/CapsulePage.jsx:1032-1040):**
```javascript
onClick={() => {
  setSelectedCapsule(capsule);
  // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º impression –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤
  (capsule.items || []).forEach(item => {
    if (item.is_brand_item && item.id) {
      brandItemsService.trackImpression(item.id, profile.telegram_id, capsule.id);
    }
  });
}}
```

---

## üß™ –ö–ê–ö –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨

### –®–∞–≥ 1: –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
localStorage.clear();
location.reload();
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
```bash
curl http://localhost:5001/health
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: {"status": "healthy", ...}
```

### –®–∞–≥ 3: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–ø—Å—É–ª—ã
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173
2. –ù–∞–∂–º–∏—Ç–µ **"–û–±–Ω–æ–≤–∏—Ç—å –∫–∞–ø—Å—É–ª—ã"**
3. –û—Ç–∫—Ä–æ–π—Ç–µ **Developer Tools ‚Üí Console**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
üîÑ –ù–∞—á–∏–Ω–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–∞–ø—Å—É–ª...
üì° –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ –±—ç–∫–µ–Ω–¥—É...
‚úÖ –ö–∞–ø—Å—É–ª—ã —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã!
üõçÔ∏è –¢–æ–≤–∞—Ä—ã –±—Ä–µ–Ω–¥–æ–≤ —É–∂–µ –ø–æ–¥–º–µ—à–∞–Ω—ã –±—ç–∫–µ–Ω–¥–æ–º
üõçÔ∏è Brand item detected: {id: "...", category: "–°—É–º–∫–∞", ...}
üõçÔ∏è Brand item detected: {id: "...", category: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã", ...}
üíæ –ö–∞–ø—Å—É–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫—ç—à
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

‚úÖ **–í —Å–µ—Ç–∫–µ –∫–∞–ø—Å—É–ª:**
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–∞–ø—Å—É–ª—ã –∏–º–µ—é—Ç –±–µ–π–¥–∂ **üõçÔ∏è** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –≤–µ—â–∏
- –ë–µ–π–¥–∂ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–æ–≤–∞—Ä–∞—Ö –±—Ä–µ–Ω–¥–æ–≤**, –Ω–µ –Ω–∞ –≤—Å–µ—Ö –≤–µ—â–∞—Ö

‚úÖ **–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞–ø—Å—É–ª—ã:**
- –¢–æ–≤–∞—Ä—ã –±—Ä–µ–Ω–¥–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å **—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏**
- –ü–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—Å—Ç—å –±–µ–π–¥–∂ **"üõçÔ∏è LiMango"**
- –ü–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–µ–º –µ—Å—Ç—å **—Ü–µ–Ω–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, "4990 RUB")
- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ç–æ–≤–∞—Ä –±—Ä–µ–Ω–¥–∞ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **–º–∞–≥–∞–∑–∏–Ω** –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

‚úÖ **–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```
üìä Impression tracked: [uuid —Ç–æ–≤–∞—Ä–∞]
üîó Opened shop link: https://...
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ Supabase
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard: https://lipolo.store
2. Table Editor ‚Üí `brand_items`
3. –ù–∞–π–¥–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –ø–æ–∫–∞–∑–∞–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ:
   - `impressions_count` —É–≤–µ–ª–∏—á–∏–ª—Å—è
   - `clicks_count` —É–≤–µ–ª–∏—á–∏–ª—Å—è (–µ—Å–ª–∏ –∫–ª–∏–∫–∞–ª–∏)

**SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```sql
SELECT 
  description,
  impressions_count,
  clicks_count,
  updated_at
FROM brand_items 
WHERE impressions_count > 0 
ORDER BY updated_at DESC 
LIMIT 5;
```

---

## üêõ –ß–¢–û –ü–†–û–í–ï–†–ò–¢–¨

### ‚úÖ –§–æ—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è?
- [ ] –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –ù–µ—Ç —Å–ª–æ–º–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### ‚úÖ –ë–µ–π–¥–∂–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã?
- [ ] –ë–µ–π–¥–∂ üõçÔ∏è —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–æ–≤–∞—Ä–∞—Ö –±—Ä–µ–Ω–¥–æ–≤
- [ ] –ë–µ–π–¥–∂ –ù–ï –Ω–∞ –≤–µ—â–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –ë–µ–π–¥–∂ –≤–∏–¥–∏–º—ã–π –∏ –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç—Å—è

### ‚úÖ –ö–ª–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç?
- [ ] –ö–ª–∏–∫ –ø–æ —Ç–æ–≤–∞—Ä—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- [ ] –ö–ª–∏–∫ –ø–æ —Ç–æ–≤–∞—Ä—É –±—Ä–µ–Ω–¥–∞ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–∞–≥–∞–∑–∏–Ω
- [ ] URL –º–∞–≥–∞–∑–∏–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

### ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è?
- [ ] Impression –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞–ø—Å—É–ª—ã
- [ ] Click –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ç–æ–≤–∞—Ä
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –≤ Supabase –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

---

## ‚ùå –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–æ–±–ª–µ–º–∞: –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log(capsule.items.filter(i => i.is_brand_item));
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ imageUrl
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–µ–π–¥–∂–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `is_brand_item` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
```javascript
console.log(capsule.items.map(i => ({ 
  category: i.category, 
  is_brand: i.is_brand_item 
})));
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–ª–∏–∫–∏ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –º–∞–≥–∞–∑–∏–Ω
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `shop_link` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
```javascript
console.log(capsule.items.filter(i => i.is_brand_item).map(i => i.shop_link));
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Flask API:
```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é
curl -X POST http://localhost:5001/api/public/items/[UUID]/impression \
  -H "Content-Type: application/json" \
  -d '{"user_id": "test", "capsule_id": "c1"}'
```

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

**Backend –ª–æ–≥–∏:**
```
‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–ø—Å—É–ª: 20
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 3 —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤ (–∫–∞—Ç–µ–≥–æ—Ä–∏—è: –°—É–º–∫–∞, —Å–µ–∑–æ–Ω: –û—Å–µ–Ω—å)
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 3 —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤ (–∫–∞—Ç–µ–≥–æ—Ä–∏—è: –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã, —Å–µ–∑–æ–Ω: –û—Å–µ–Ω—å)
‚ûï –î–æ–ø–æ–ª–Ω–µ–Ω–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏: bags, headwear, gloves
üõçÔ∏è –ü–æ–¥–º–µ—à–∏–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–æ–≤ –≤ 3 –∏–∑ 20 –∫–∞–ø—Å—É–ª
‚úÖ –ö–∞–ø—Å—É–ª–∞ c10: –∑–∞–º–µ–Ω–∏–ª–∏ tops –Ω–∞ —Ç–æ–≤–∞—Ä –±—Ä–µ–Ω–¥–∞ LiMango
‚úÖ –ö–∞–ø—Å—É–ª–∞ c11: –∑–∞–º–µ–Ω–∏–ª–∏ tops –Ω–∞ —Ç–æ–≤–∞—Ä –±—Ä–µ–Ω–¥–∞ LiMango
‚úÖ –ö–∞–ø—Å—É–ª–∞ c18: –∑–∞–º–µ–Ω–∏–ª–∏ bottoms –Ω–∞ —Ç–æ–≤–∞—Ä –±—Ä–µ–Ω–¥–∞ LiMango
üìä –ü–æ–¥–º–µ—à–∞–Ω–æ 3 —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ 2 —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π: tops, bottoms
```

**Frontend –ª–æ–≥–∏:**
```
üîÑ –ù–∞—á–∏–Ω–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–∞–ø—Å—É–ª...
‚úÖ –ö–∞–ø—Å—É–ª—ã —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã!
üõçÔ∏è Brand item detected: {id: "...", category: "–í–µ—Ä—Ö", imageUrl: "https://...", is_brand_item: true}
üìä Impression tracked: [uuid]
üõí Click tracked: [uuid]
üîó Opened shop link: https://...
```

---

## ‚úÖ –ì–û–¢–û–í–û!

–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –≥–∏–±—Ä–∏–¥–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ

